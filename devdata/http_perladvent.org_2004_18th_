<html>

<!-- page copyright Mark Fowler 2002-2004 -->
<!-- all rights reserved -->

<head>
 <title>Perl 2004 Advent Calendar: Acme::Drunk</title>
<link rel="stylesheet" href="../style.css" type="text/css" /></head>
<body bgcolor="#ff7f00">


<div class="bigheading">The 2004 Perl Advent Calendar</div>
<div class="externalnav"><a href="../../FAQ-2shortplanks.html">[about]</a> | <a href="../../archives.html">[archives]</a> | <a href="../../contact.html">[contact]</a> | <a href="../../">[home]</a></div>
<br />


<div class="box">
<div class="onthe">
On the 18th day of Advent my True Language brought to me..
</div>
<div class="modtitle">Acme::Drunk</div>

<!-- ooh look, a table.  Someone *please* tell me how to do this with css -->
<!-- also, i.e. totally doesn't dtr if I say width="100%" here -->
<center>
<table width="300"  cellpadding="0" cellspacing="0">
<tr>

<td width="33%">

<div align="left" class="internalnav"><a href="../17th/">[previous]</a></div>
</td>


<td width="33%">
<div align="center" class="internalnav">
<a href="../">[calendar]</a>
</div>
</td>

<td width="33%">

<div align="right" class="internalnav"><a href="../19th/">[next]</a></div>

</td>

</tr>
</table>
</center>

</div>




<div class="box">
<div class="doc"><p>So, I can just imagine the people sitting at home clicking on the
advent calendar today, then with frowns on their face realising that
the lazy so and so that runs the site hasn't updated the page yet.  In
the grand tradition of MegaTokyo I'm having a "Dead Mark Day".</p>
<p>Of course, it would have all been better if I'd paid more attention to
what I was drinking last night at the Christmas Karoke.  I should have
worked out just how drunk I was going to get.  I needed
<b>Acme::Drunk</b>.</p>
</div>
<div class="mylink"><a href="http://search.cpan.org/perldoc?Acme::Drunk">[Read the documentation for Acme::Drunk on search.cpan.org]</a></div>
</div>



<div class="box">
<div class="doc"><p><b>Acme::Drunk</b> can be used to calculate the blood alcohol
concentration in a human.  Let's look at the example from the
documentation:</p>
<pre>  use Acme::Drunk;</pre>

<pre>  my $bac = drunk(
     gender         =&gt; MALE, # or FEMALE
     hours          =&gt; 2,    # since start of binge
     body_weight    =&gt; 160,  # in lbs
     alcohol_weight =&gt; 3,    # oz of alcohol
  );</pre>

<pre>  if ($bac &gt;= 0.08) { call_cab() } else { walk_home() }</pre>

<p>So, to work out exactly what I had to drink last night, let's
work out what was going on.  Right, what did I drink last night:</p>
<pre>  one bottle of stella (330ml) 
  a quarter a can of Heineken Export (about 75ml)
  three UK pints of Adnams (1704ml)</pre>

<p>Oh dear oh dear.  Let's look at this programmatically:</p>
<pre>  # define the constants
  use constant FLOZ_PER_ML =&gt; 0.0338140226;
  use constant PERCENTAGE  =&gt; 0.05;</pre>

<pre>  # convert the values to fl oz and then work out the percentage
  my $stella =  330 * FLOZ_PERL_ML * PERCENTAGE;
  my $export =   75 * FLOZ_PERL_ML * PERCENTAGE;
  my $adnams = 1704 * FLOZ_PERL_ML * PERCENTAGE;</pre>

<pre>  my $total = $stella + $export + $adnams;</pre>

<p>Now we have to work out my weight.  I'm about 11 stone (stop
sniggering at the back - I <i>am</i>.)</p>
<pre>  use constant LBS_PER_STONE =&gt; 14;
  my $weight = 11 * LBS_PER_STONE;</pre>

<p>Luckly, I started at 4.30pm (don't ask) and then completed drinking at
11pm (pub closing time.)  That's six and a half hours.  We now have
enough to calculate my blood alcohol concentration last night.</p>
<pre> use Acme::Drunk;</pre>

<pre> print drunk(
   gender         =&gt; MALE,
   hours          =&gt; 6.5,
   body_weight    =&gt; $weight,
   alcohol_weight =&gt; $total,
 ), "\n";</pre>

<p>Which prints out:</p>
<pre>  0.0448485485103132</pre>

<p>Hmm.  Looks like I wasn't actually that drunk.  Darn, that 
means I've got to come up with a better excuse.</p>
</div>
</div>




<div class="box">
<div class="doc"><p><li><a href="http://www.megatokyo.com/index.php">MegaTokyo cartoon</a></li></p>
</div>
</div>




 




<!-- Created 2004-12-21T18:29:59 -->

<br/>

<div class="copyright">
Copyright 2000-2004 Mark Fowler, all rights reserved.<br/>
This documentation may be distributed under the <a href="http://www.opensource.org/licenses/academic.php">Academic Free License</a><br/>
Comments/Complaints/Suggestions re this site: <a href="../../contact.html">webmaster</a>
</div>

</body>
</html>